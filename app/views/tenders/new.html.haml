#wrapper
  %section#form
    .row
      .medium-3.small-12.columns.animated{"data-animate" => "fadeInDown", "data-animate-delay" => "0"}
        .title-section
          %h3
            %strong Contact Us
      .medium-9.columns.animated{"data-animate" => "fadeInUp", "data-animate-delay" => "0"}
        .section-desc
          %h4
            %strong As one of the core design principles, typography can really make or break a website design
          %p Despite recent advances in web type technology weâ€™re still fairly limited when it comes to creative typography layouts, meaning image replacement techniques are still common, but these days we have massive choice when it comes to selecting fonts for our designs.
    .row
      #message
      = form_for @tender do |f|
        = f.hidden_field :ref_no
        = f.hidden_field :published_date
        .small-8.columns.small-centered
          Company: #{current_user.company_name}
          = f.hidden_field :buyer_company_name
          %br
          %br
        .small-8.columns.small-centered
          Buyer Name (may not be your name)
          = f.text_field :buyer_name, value: current_user.name, placeholder: "Please leave full name"
        .small-8.columns.small-centered
          Buyer Email (may not be your email)
          = f.text_field :buyer_email, value: current_user.email, placeholder: "Buyer Email"
        .small-8.columns.small-centered
          Buyer Contact Number (may not be your phone number)
          = f.text_field :buyer_contact_number, placeholder: "eg 98765432"
        .small-8.columns.small-centered
          Budget
          #budget-error
          %br
          = f.radio_button(:budget, "$0 - $999")
          = label_tag(:budget, "$0 - $999")
          = f.radio_button(:budget, "$1000 - $4999")
          = label_tag(:budget, "$1000 - $4999")
          = f.radio_button(:budget, "$5000 - $9999")
          = label_tag(:budget, "$5000 - $9999")
          = f.radio_button(:budget, "> $10000")
          = label_tag(:budget, "> $10000")
        .small-8.columns.small-centered
          Closing Date Time
          = f.datetime_field :closing_datetime, placeholder: "Closing date & time"
        .small-12.columns.small-centered
          Buyer Description
          = f.text_area :description, placeholder: "Fill in tender description"
        .small-8.columns.small-centered.text-center
          %button#submit{:type => "submit"} SEND

- content_for :javascript do
  :javascript
    $(function(){
      $('#tender_closing_datetime').fdatepicker({
        format: 'yyyy-mm-dd hh:ii',
        pickTime: true
      });
      $('#tender_closing_datetime').on('changeDate',function(){
        $('form.new_tender').valid();
      });
      $("form.new_tender").validate({
        rules: {
          "tender[buyer_name]": {
            required: true
          },
          "tender[buyer_email]": {
            required: true,
            email: true
          },
          "tender[budget]": {
            required: true
          },
          "tender[closing_datetime]": {
            required: true
          },
          "tender[description]": {
            required: true
          }
        },
        errorPlacement: function(error, element) {
          if (element.attr("name") == "tender[budget]") {
            error.insertAfter("#budget-error");
          } else {
            error.insertAfter(element);
          }
        },
        messages: {
          "tender[buyer_email]": {
            required: "Email of person of contact is required.",
            email: "Your email is in an invalid format."
          },
          "tender[buyer_name]": {
            required: "Name of person of contact is required."
          },
          "tender[budget]": {
            required: "Budget range required"
          },
          "tender[closing_datetime]": {
            required: "Closing date time required"
          },
          "tender[description]": {
            required: "Tender description is required"
          }
        }
      });
    });
